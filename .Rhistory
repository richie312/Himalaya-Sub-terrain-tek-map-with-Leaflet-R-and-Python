###################################################
# Working Directories
WD = "C:/Users/aritra.chatterjee/Desktop/Rodan & Fields/ProductDemandForecasts/"
LIBLOC = "libpath"
setwd(WD) # set working directory
# Libraries
packages_load=c("stringr","openxlsx","mailR","tictoc","digest","RFDSTools","timeDate","forecast","lmtest","tseries","data.table",
"RODBC","dplyr","lubridate","zoo","expsmooth","fma","fpp","proto","gsubfn","RSQLite","sqldf")
for (i in 1:length(packages_load)){
print(packages_load[i])
require(packages_load[i], lib.loc = paste0(WD,LIBLOC), warn.conflicts = TRUE, quietly = TRUE,character.only=TRUE)
}
source('SourceFile.R')
# Source Files
Path = paste0(WD,'queries/')
SourceFile(Path,'Queries.R' )
Path = paste0(WD,'src/')
SourceFile(Path,'Functions.R' )
SourceFile(Path,'Consultant_kits.R' )
SourceFile(Path,'Consultant_kits_models.R' )
SourceFile(Path,'Regimens.R' )
SourceFile(Path,'Regimen Models.R' )
SourceFile(Path,'Enrollments.R' )
SourceFile(Path,'time series models.R' )
SourceFile(Path,'Individual Products.R' )
SourceFile(Path,'Individual Products Models.R' )
SourceFile(Path,'DataExtracts.R' )
SourceFile(Path,'Non_Shipped_Items.R' )
SourceFile(Path,'PromotionAdjustments_v3.R' )
PLOT = FALSE
PDF = FALSE
### Forecast Run Date/Time stamps
ForecastRunDateTime = Sys.time()
ForecastRunDate = Sys.Date()
if(names(dev.cur()) != 'null device')  dev.off()
if (PDF)
{
PDF_filename = paste0('DemandForecasts-',ForecastRunDate,'.pdf')
pdf(PDF_filename,width=8,height=6)
}
folder=paste0(WD,'src/Tables/')
file=c('Consultant_Enrollments','DateDF','Enrollment_Forecasts',
'Metadata','newPrice_df','PC_Enrollments','Promo_by_month')
Consultant_Enrollments = read.csv(paste0(folder,file[1],'.csv'),stringsAsFactors = FALSE)
Consultant_Enrollments$CalDate
Consultant_Enrollments$CalDate=as.Date(Consultant_Enrollments$CalDate,format='%m/%d/%y')
Consultant_Enrollments$CalDate
Consultant_Enrollments = read.csv(paste0(folder,file[1],'.csv'),stringsAsFactors = FALSE)
Consultant_Enrollments$CalDate=format(PC_Enrollments$CalDate,format ='%m/%d/%y')
Consultant_Enrollments$CalDate=as.Date(Consultant_Enrollments$CalDate,format='%m/%d/%y')
Consultant_Enrollments$CalDate=format(Consultant_Enrollments$CalDate,format ='%m/%d/%y')
Consultant_Enrollments = read.csv(paste0(folder,file[1],'.csv'),stringsAsFactors = FALSE)
Consultant_Enrollments$CalDate=format(Consultant_Enrollments$CalDate,format ='%m/%d/%y')
Consultant_Enrollments$CalDate=as.Date(Consultant_Enrollments$CalDate,format='%m/%d/%y')
Consultant_Enrollments$CalDate
PC_Enrollments = read.csv(paste0(folder,file[6],'.csv'),stringsAsFactors = FALSE)
PC_Enrollments$CalDate=format(PC_Enrollments$CalDate,format ='%m/%d/%y')
PC_Enrollments$CalDate=as.Date(PC_Enrollments$CalDate,'%m/%d/%Y')
PC_Enrollments$CalDate
Consultant_Enrollments = read.csv(paste0(folder,file[1],'.csv'),stringsAsFactors = FALSE)
Consultant_Enrollments$CalDate=format(Consultant_Enrollments$CalDate,format ='%m/%d/%y')
Consultant_Enrollments$CalDate=as.Date(Consultant_Enrollments$CalDate,format='%m/%d/%Y')
Consultant_Enrollments$CalDate
knitr::opts_chunk$set(echo = TRUE)
library(kableExtra)
getwd()
setwd('C:/Users/aritra.chatterjee/Documents')
data = readLines('Scheduled Jobs.txt')
data
class(Data)
class(data)
data[1:10]
data = read.delim2('Scheduled Jobs.txt')
data
data[1:10]
data[10]
data = read.delim2('Scheduled Jobs.txt')
class(data)
names(data)
data[1]
?read.delim2()
data = read.delim2('Scheduled Jobs.txt',sep='#')
data[2]
head(data)
head(data)
table=read.csv('Scheduled_jobs.csv',stringsAsFactors = FALSE)
names(tables)
names(table)
colnames(table)=c('Catgory','DSN','Tables')
table%>%
kable()%>%
kable_styling(bootstrap_options = c("striped", "hover"),full_width = F, position = "left")%>%
column_spec(3, width = "30em", background = "#FAFAD2")
library(kableExtra)
table=read.csv('Scheduled_jobs.csv',stringsAsFactors = FALSE)
colnames(table)=c("Job.Description" ,"Frequency","Location",        "Minute","Hour", "Day","Month","DayofWeek","Status" )
table%>%
kable()%>%
kable_styling(bootstrap_options = c("striped", "hover"),full_width = F, position = "left")%>%
column_spec(3, width = "30em", background = "#FAFAD2")
data("AirPassengers")
data<-data("AirPassengers")
names(data)
class(data)
data
data("AirPassengers")
AP<-AirPassengers
AP
class(AP)
cycle(AP)
boxplot(AP~cycle(AP))
aggregate(AP)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$Stamen.TerrainBackground)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
fitBounds(minLong,minLat,maxLong,maxLat)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$Stamen.TerrainBackground)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)
## Load the library
setwd('C:/Users/aritra.chatterjee/Desktop/Trek_Maps')
library(ggmap)
library(leaflet)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
## Get the lonlat for bounding box
## Plot the hiking location in leaflet
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines()
setwd('C:/Users/aritra.chatterjee/Onedrive/Trek_Maps')
library(ggmap)
library(leaflet)
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>")
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhpu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhpu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"]))
Group<-c("A","A","A","A")
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhpu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhpu"]))
route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhpu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhpu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"]))
Group<-c("A","A","A","A","A","A")
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhpu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhpu"]))
route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
Group
initlon
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhpu"]))
initlon
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"]))
Group<-c("A","A","A","A","A","A")
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"]))
## Combine all the columns to get a new data frame
route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
route_map_df
mydf2 <- data.frame(group = route_map_df$Group,
lat = c(route_map_df$initlat, route_map_df$newlat),
long = c(route_map_df$initlon,route_map_df$newlon))
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines()
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~long,lat = ~initlat,group = Group)
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~initlon,lat = ~initlat,group = Group)
leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
saveWidget(map, file="sandakpup_trek_map.html")
library(htmlwidgets)
saveWidget(map, file="sandakpup_trek_map.html")
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"]))
Group<-c("A","A","A","A","A","A")
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"]))
## Combine all the columns to get a new data frame
route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
## Combine the latitude and longitude in another data frame
mydf2 <- data.frame(group = route_map_df$Group,
lat = c(route_map_df$initlat, route_map_df$newlat),
long = c(route_map_df$initlon,route_map_df$newlon))
## Plot the hiking location in leaflet
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
# Save  the map in html format
saveWidget(map, file="sandakpup_trek_map.html")
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"]))
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
# Save  the map in html format
saveWidget(map, file="sandakpup_trek_map.html")
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
map
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
Group<-c("A","A","A","A","A","A")
initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"]))
initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"]))
## Combine all the columns to get a new data frame
route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lat[sandakpu_loc$Location=="Darjeeling"]))
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
# Save  the map in html format
saveWidget(map, file="sandakpup_trek_map.html")
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Dist_to_Next.Camp,"<br>",
"<font color= #E34F4F><h3>Day: </h3></font>",sandakpu_loc$Days,"<br>")
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
# Save  the map in html format
saveWidget(map, file="sandakpup_trek_map.html")
## Load the library
setwd('C:/Users/aritra.chatterjee/Onedrive/Trek_Maps')
library(ggmap)
library(leaflet)
library(htmlwidgets)
## Get the lat and lon for the camping locations
sandakpu_loc = read.csv('sandakpu_loc.csv',stringsAsFactors = FALSE)
popup_tpl <- paste0("<font color= #E34F4F><h3>Camp: </h3></font>",sandakpu_loc$Location,"<br>",
popup =sprintf("<img src = %s style=width:104px;height:142px;>",sandakpu_loc$Links),"<br>",
"<font color= #E34F4F><h3>Longitude: </h3></font>",sandakpu_loc$lon,"<br>",
"<font color= #E34F4F><h3>Latitude: </h3></font>",sandakpu_loc$lat,"<br>",
"<font color= #E34F4F><h3>Altitude: </h3></font>",sandakpu_loc$Altitude,"<br>",
"<font color= #E34F4F><h3>Next Camp Distance: </h3></font>",sandakpu_loc$Dist_to_Next.Camp,"<br>",
"<font color= #E34F4F><h3>Day: </h3></font>",sandakpu_loc$Days,"<br>")
## Make a dataframe from place A to place B to place C and place D
newlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lon[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lon[sandakpu_loc$Location=="Darjeeling"]))
newlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"],
sandakpu_loc$lat[sandakpu_loc$Location=="sepi"],
sandakpu_loc$lat[sandakpu_loc$Location=="Darjeeling"]))
# Group<-c("A","A","A","A","A","A")
#
# initlon<-as.numeric(c(sandakpu_loc$lon[sandakpu_loc$Location=="Manebhanjang"],
#                       sandakpu_loc$lon[sandakpu_loc$Location=="Meghma"],
#                       sandakpu_loc$lon[sandakpu_loc$Location=="Tumling"],
#                       sandakpu_loc$lon[sandakpu_loc$Location=="Gairibas"],
#                       sandakpu_loc$lon[sandakpu_loc$Location=="Kalipokhri"],
#                       sandakpu_loc$lon[sandakpu_loc$Location=="Sandakhphu"]))
#
# initlat<-as.numeric(c(sandakpu_loc$lat[sandakpu_loc$Location=="Manebhanjang"],
#                       sandakpu_loc$lat[sandakpu_loc$Location=="Meghma"],
#                       sandakpu_loc$lat[sandakpu_loc$Location=="Tumling"],
#                       sandakpu_loc$lat[sandakpu_loc$Location=="Gairibas"],
#                       sandakpu_loc$lat[sandakpu_loc$Location=="Kalipokhri"],
#                       sandakpu_loc$lat[sandakpu_loc$Location=="Sandakhphu"]))
# ## Combine all the columns to get a new data frame
#
#
# route_map_df<-cbind.data.frame(Group,initlon,initlat,newlon,newlat)
#
# ## Combine the latitude and longitude in another data frame
#
# mydf2 <- data.frame(group = route_map_df$Group,
#                     lat = c(route_map_df$initlat, route_map_df$newlat),
#                     long = c(route_map_df$initlon,route_map_df$newlon))
## Plot the hiking location in leaflet
map = leaflet(sandakpu_loc)%>%addProviderTiles(providers$OpenStreetMap)%>%
addCircleMarkers(lng=~sandakpu_loc$lon,lat=~sandakpu_loc$lat,radius=20,popup = popup_tpl)%>%
addPolylines( lng = ~newlon,lat = ~newlat,group = Group)
# Save  the map in html format
saveWidget(map, file="sandakpup_trek_map.html")
